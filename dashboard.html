<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Dashboard | SPAN - Students for Patient Advocacy Nationwide</title>

   <!-- Google Tag Manager -->
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-7QY6SHLJDL"></script>
   <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7QY6SHLJDL');
   </script>

   <!-- SEO / Social -->
   <link rel="sitemap" type="application/xml" title="Sitemap" href="https://spanationwide/sitemap.xml" />
   <script type="application/ld+json">
      {
         "@context": "https://schema.org",
         "@type": "Organization",
         "name": "SPAN - Students for Patient Advocacy Nationwide",
         "url": "https://spanationwide.org",
         "logo": "https://spanationwide.org/assets/images/index/logo-icon-dark.svg",
         "sameAs": [
            "https://www.linkedin.com/company/spanationwide/",
            "https://www.instagram.com/spanationwide/"
         ]
      }
   </script>

   <!-- Styles -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
   <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
   <link href="/assets/css/style.css" rel="stylesheet">

   <!-- Favicon & Social -->
   <link rel="icon" type="image/svg+xml" href="assets/images/index/logo-icon-dark.ico" media="(prefers-color-scheme: light)">
   <link rel="icon" type="image/svg+xml" href="assets/images/index/logo-icon-light.ico" media="(prefers-color-scheme: dark)">
   <link rel="canonical" href="https://spanationwide.org">
</head>

<body>
<!-- Navbar -->
<nav id="navbarContainer" class="navbar navbar-expand-lg navbar-dark sticky-top"></nav>

<!-- Hero -->
<section class="subpage-hero d-flex align-items-center text-white text-center position-relative">
   <div class="parallax-bg" aria-hidden="true"></div>
   <div class="container position-relative z-1">
      <h1 class="display-3 fw-bold mb-2" data-aos="fade-up">Dashboard</h1>
      <p class="lead" data-aos="fade-up" data-aos-delay="200">Manage your SPAN membership.</p>
   </div>
</section>

<div class="container my-5">

  <!-- Profile Header -->
  <div class="text-center mb-5">
    <img id="profileImage" class="rounded-circle border border-dark border-3 mb-3" src="" alt="Profile Image" style="width:150px;height:150px;object-fit:cover;display:none;">
    <h2 id="fullName">-</h2>
    <p id="role" class="text-muted">-</p>
    <div class="mt-2">
      <a id="linkedinLink" href="#" target="_blank" class="text-dark fs-4 me-2" style="display:none;"><i class="bi bi-linkedin"></i></a>
      <a id="instagramLink" href="#" target="_blank" class="text-dark fs-4" style="display:none;"><i class="bi bi-instagram"></i></a>
    </div>
    <button id="downloadSpanCard" class="btn btn-dark mt-3"><i class="bi bi-person-vcard"></i> Download My SPANCard</button>
  </div>
  
  <h3>Your Info</h3>

  <!-- Info Cards -->
  <div class="row" id="infoCards"></div>

  <!-- Volunteer Hours Section -->
  <section id="volunteerSection" class="mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3>Volunteer Hours</h3>
      <button class="btn btn-dark" id="addVolunteerBtn">
        <i class="bi bi-plus-circle me-2"></i>Add Entry
      </button>
    </div>
    <div id="volunteerCards" class="accordion"></div>
  </section>

  <!-- Password Change -->
  <section class="mt-5">
    <h3>Change Password</h3>
    <div class="card mt-3">
      <div class="card-body">
        <form id="changePasswordForm">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="newPassword" class="form-label">New Password</label>
              <input type="password" class="form-control" id="newPassword" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="confirmPassword" class="form-label">Confirm Password</label>
              <input type="password" class="form-control" id="confirmPassword" required>
            </div>
          </div>
          <button type="submit" class="btn btn-dark">Update Password</button>
          <div id="passwordMessage" class="mt-2"></div>
        </form>
      </div>
    </div>
  </section>
</div>

<!-- Modals -->
<!-- SPAN Card Password Modal -->
<div class="modal fade" id="passwordModal" tabindex="-1" aria-labelledby="passwordModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="passwordModalLabel">Confirm Password</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Confirm your password to generate your SPANCard:</p>
        <input type="password" id="qrPasswordInput" class="form-control" placeholder="Your password">
        <div id="qrPasswordError" class="text-danger mt-2" style="display: none;">Password is required.</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Cancel</button>
        <button type="button" id="confirmQrPassword" class="btn btn-dark">Confirm</button>
      </div>
    </div>
  </div>
</div>

<footer id="footerContainer" class="footer text-white py-5"></footer>

<!-- Scripts -->
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script defer src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof AOS !== 'undefined') AOS.init({ once: true, duration: 1000 });
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
<script defer type="module" src="/assets/scripts/script.js"></script>
<script defer type="module" src="/assets/scripts/dashboard.js"></script>
</body>
</html>